(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(17),u=t.n(c),a=t(8),r=t(3),o=t(2),i=t(0),s=function(e){var n=e.persons.filter((function(n){return n.name.toLowerCase().includes(e.filterValue.toLowerCase())}));return Object(i.jsx)("ul",{children:n.map((function(n){return Object(i.jsxs)("li",{children:[n.name,"  ",n.number," ",Object(i.jsx)("button",{onClick:function(){return e.onDelete(n)},children:"Delete"})]},n.id)}))})},l=function(e){return Object(i.jsxs)("div",{children:["filter shown with ",Object(i.jsx)("input",{value:e.value,onChange:e.onChange})]})},b=function(e){return Object(i.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:e.valueName,onChange:e.onChangeName})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:e.valueNumber,onChange:e.onChangeNumber})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},j=t(4),d=t.n(j),f="/api/persons",m={getAll:function(){return d.a.get(f).then((function(e){return e.data}))},create:function(e){return d.a.post(f,e).then((function(e){return e.data}))},remove:function(e){return d.a.delete("".concat(f,"/").concat(e.id)).then((function(e){return e.status}))},update:function(e,n){return d.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))}},h=function(e){var n=e.message;return null===n?null:Object(i.jsx)("div",{className:"success",children:n})},O=function(e){var n=e.message;return null===n?null:Object(i.jsx)("div",{className:"error",children:n})},v=function(){var e=Object(o.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],u=Object(o.useState)(""),j=Object(r.a)(u,2),d=j[0],f=j[1],v=Object(o.useState)(""),p=Object(r.a)(v,2),x=p[0],g=p[1],w=Object(o.useState)(""),N=Object(r.a)(w,2),C=N[0],S=N[1],k=Object(o.useState)(null),D=Object(r.a)(k,2),y=D[0],A=D[1],T=Object(o.useState)(null),E=Object(r.a)(T,2),J=E[0],L=E[1];Object(o.useEffect)((function(){m.getAll().then((function(e){c(e)}))}),[]);return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(h,{message:y}),Object(i.jsx)(O,{message:J}),Object(i.jsx)(l,{value:C,onChange:function(e){S(e.target.value)}}),Object(i.jsx)(b,{onSubmit:function(e){e.preventDefault();var n={id:t.length+1,name:d,number:x};if(t.some((function(e){return e.name===n.name}))){if(window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a new one?"))){var u=t.find((function(e){return e.name===n.name})),r=Object(a.a)(Object(a.a)({},u),{},{number:n.number});m.update(r.id,r).then((function(e){c(t.map((function(n){return n.id!==e.id?n:e}))),A("Number of '".concat(r.name,"' is updated")),setTimeout((function(){A(null)}),5e3)}))}}else c(t.concat(n)),A("'".concat(n.name,"' is added to the phonebook")),setTimeout((function(){A(null)}),5e3),f(""),g(""),m.create(n).then((function(e){c(t.concat(e))})).catch((function(e){A(null),L("".concat(e.response.data.error)),c(t.filter((function(e){return e.name!==n.name})))}))},valueName:d,onChangeName:function(e){f(e.target.value)},valueNumber:x,onChangeNumber:function(e){g(e.target.value)}}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(s,{persons:t,filterValue:C,onDelete:function(e){m.remove(e).catch((function(n){L("Name'".concat(e.name,"' was already deleted from phonebook")),setTimeout((function(){L(null)}),5e3),c(t.filter((function(n){return n.id!==e.id})))})).then((function(n){window.confirm("Delete ".concat(e.name,"?")),m.getAll().then((function(e){c(e)}))}))}})]})};t(41);u.a.render(Object(i.jsx)(v,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.e95c4307.chunk.js.map